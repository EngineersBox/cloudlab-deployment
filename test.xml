<rspec xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.geni.net/resources/rspec/3" xmlns:client="http://www.protogeni.net/resources/rspec/ext/client/1" xmlns:sharedvlan="http://www.geni.net/resources/rspec/ext/shared-vlan/1" xsi:schemaLocation="http://www.geni.net/resources/rspec/3 http://www.geni.net/resources/rspec/3/request.xsd http://www.geni.net/resources/rspec/ext/shared-vlan/1 http://www.geni.net/resources/rspec/ext/shared-vlan/1/request.xsd" type="request">
  <node client_id="17abbaf6-34ee-4b7f-b05c-802ae36e3599" exclusive="true">
    <sliver_type name="raw">
      <disk_image name="test"/>
    </sliver_type>
    <interface client_id="17abbaf6-34ee-4b7f-b05c-802ae36e3599:if0">
      <ip address="10.0.0.0" netmask="255.255.255.0" type="ipv4"/>
    </interface>
    <services>
      <install url="https://github.com/EngineersBox/cassandra-benchmarking/releases/cassandra-5.0.2/cassandra.tar.gz" install_path="/var/lib"/>
      <execute shell="bash" command="echo &quot;# Node configuration properties&#10;APPLICATION_VARIANT=cassandra&#10;APPLICATION_VERSION=5.0.2&#10;&#10;EBPF_NET_INTAKE_HOST=10.0.0.3&#10;EBPF_NET_INTAKE_PORT=8000&#10;&#10;OTEL_EXPORTER_OTLP_ENDPOINT=http://10.0.0.3:4318&#10;OTEL_SERVICE_NAME=17abbaf6-34ee-4b7f-b05c-802ae36e3599&#10;OTEL_RESOURCE_ATTRIBUTES=application=cassandra&#10;&#10;NODE_IP=10.0.0.0&#10;&#10;NODE_ALL_IPS=(&quot;10.0.0.0&quot; &quot;10.0.0.1&quot; &quot;10.0.0.2&quot;)&#10;SEED_NODE=false&#10;OTEL_METRICS_EXPORTER=otlp&#10;OTEL_TRACES_EXPORTER=always_on&#10;OTEL_LOGS_EXPORTER=otlp&quot; &gt; /var/lib/node_env"/>
      <execute shell="bash" command="sed -i &quot;s/@@COLLECTOR_ADDRESS@@/10.0.0.3/g&quot; /var/lib/config/otel/otel-instance.config.yaml"/>
      <execute shell="bash" command="echo &quot;&lt;TODO&gt;&quot; | docker login ghcr.io -u EngineersBox --password-stdin"/>
      <execute shell="bash" command="ln -s //var/lib/units/bootstrap.service /etc/systemd/system/bootstrap.service &amp;&amp; systemctl start bootstrap.service"/>
      <execute shell="bash" command="echo &quot;# DC and Rack specification of this node&#10;dc=dc-0&#10;rack=rack-0&#10;&quot; &gt; /var/lib/config/cassandra-rackdc.properties"/>
      <execute shell="bash" command="echo &quot;# Mappings of Node IP=DC:Rack&#10;# Default mapping for unknown nodes&#10;default=dc-0:rack-0&#10;&#10;10.0.0.0=dc-0:rack-0&#10;10.0.0.1=dc-0:rack-0&#10;10.0.0.2=dc-0:rack-0&quot; &gt; /var/lib/config/cassandra-topology.properties"/>
    </services>
  </node>
  <node client_id="862896c8-0bfc-410f-8056-97fc7d9e2c73" exclusive="true">
    <sliver_type name="raw">
      <disk_image name="test"/>
    </sliver_type>
    <interface client_id="862896c8-0bfc-410f-8056-97fc7d9e2c73:if1">
      <ip address="10.0.0.1" netmask="255.255.255.0" type="ipv4"/>
    </interface>
    <services>
      <install url="https://github.com/EngineersBox/cassandra-benchmarking/releases/cassandra-5.0.2/cassandra.tar.gz" install_path="/var/lib"/>
      <execute shell="bash" command="echo &quot;# Node configuration properties&#10;APPLICATION_VARIANT=cassandra&#10;APPLICATION_VERSION=5.0.2&#10;&#10;EBPF_NET_INTAKE_HOST=10.0.0.3&#10;EBPF_NET_INTAKE_PORT=8000&#10;&#10;OTEL_EXPORTER_OTLP_ENDPOINT=http://10.0.0.3:4318&#10;OTEL_SERVICE_NAME=862896c8-0bfc-410f-8056-97fc7d9e2c73&#10;OTEL_RESOURCE_ATTRIBUTES=application=cassandra&#10;&#10;NODE_IP=10.0.0.1&#10;&#10;NODE_ALL_IPS=(&quot;10.0.0.0&quot; &quot;10.0.0.1&quot; &quot;10.0.0.2&quot;)&#10;SEED_NODE=false&#10;OTEL_METRICS_EXPORTER=otlp&#10;OTEL_TRACES_EXPORTER=always_on&#10;OTEL_LOGS_EXPORTER=otlp&quot; &gt; /var/lib/node_env"/>
      <execute shell="bash" command="sed -i &quot;s/@@COLLECTOR_ADDRESS@@/10.0.0.3/g&quot; /var/lib/config/otel/otel-instance.config.yaml"/>
      <execute shell="bash" command="echo &quot;&lt;TODO&gt;&quot; | docker login ghcr.io -u EngineersBox --password-stdin"/>
      <execute shell="bash" command="ln -s //var/lib/units/bootstrap.service /etc/systemd/system/bootstrap.service &amp;&amp; systemctl start bootstrap.service"/>
      <execute shell="bash" command="echo &quot;# DC and Rack specification of this node&#10;dc=dc-0&#10;rack=rack-0&#10;&quot; &gt; /var/lib/config/cassandra-rackdc.properties"/>
      <execute shell="bash" command="echo &quot;# Mappings of Node IP=DC:Rack&#10;# Default mapping for unknown nodes&#10;default=dc-0:rack-0&#10;&#10;10.0.0.0=dc-0:rack-0&#10;10.0.0.1=dc-0:rack-0&#10;10.0.0.2=dc-0:rack-0&quot; &gt; /var/lib/config/cassandra-topology.properties"/>
    </services>
  </node>
  <node client_id="1b50d24d-780e-464d-bf3b-d9097d41a879" exclusive="true">
    <sliver_type name="raw">
      <disk_image name="test"/>
    </sliver_type>
    <interface client_id="1b50d24d-780e-464d-bf3b-d9097d41a879:if2">
      <ip address="10.0.0.2" netmask="255.255.255.0" type="ipv4"/>
    </interface>
    <services>
      <install url="https://github.com/EngineersBox/cassandra-benchmarking/releases/cassandra-5.0.2/cassandra.tar.gz" install_path="/var/lib"/>
      <execute shell="bash" command="echo &quot;# Node configuration properties&#10;APPLICATION_VARIANT=cassandra&#10;APPLICATION_VERSION=5.0.2&#10;&#10;EBPF_NET_INTAKE_HOST=10.0.0.3&#10;EBPF_NET_INTAKE_PORT=8000&#10;&#10;OTEL_EXPORTER_OTLP_ENDPOINT=http://10.0.0.3:4318&#10;OTEL_SERVICE_NAME=1b50d24d-780e-464d-bf3b-d9097d41a879&#10;OTEL_RESOURCE_ATTRIBUTES=application=cassandra&#10;&#10;NODE_IP=10.0.0.2&#10;&#10;NODE_ALL_IPS=(&quot;10.0.0.0&quot; &quot;10.0.0.1&quot; &quot;10.0.0.2&quot;)&#10;SEED_NODE=false&#10;OTEL_METRICS_EXPORTER=otlp&#10;OTEL_TRACES_EXPORTER=always_on&#10;OTEL_LOGS_EXPORTER=otlp&quot; &gt; /var/lib/node_env"/>
      <execute shell="bash" command="sed -i &quot;s/@@COLLECTOR_ADDRESS@@/10.0.0.3/g&quot; /var/lib/config/otel/otel-instance.config.yaml"/>
      <execute shell="bash" command="echo &quot;&lt;TODO&gt;&quot; | docker login ghcr.io -u EngineersBox --password-stdin"/>
      <execute shell="bash" command="ln -s //var/lib/units/bootstrap.service /etc/systemd/system/bootstrap.service &amp;&amp; systemctl start bootstrap.service"/>
      <execute shell="bash" command="echo &quot;# DC and Rack specification of this node&#10;dc=dc-0&#10;rack=rack-0&#10;&quot; &gt; /var/lib/config/cassandra-rackdc.properties"/>
      <execute shell="bash" command="echo &quot;# Mappings of Node IP=DC:Rack&#10;# Default mapping for unknown nodes&#10;default=dc-0:rack-0&#10;&#10;10.0.0.0=dc-0:rack-0&#10;10.0.0.1=dc-0:rack-0&#10;10.0.0.2=dc-0:rack-0&quot; &gt; /var/lib/config/cassandra-topology.properties"/>
    </services>
  </node>
  <node client_id="eaf392d3-2812-4b34-8932-0052419a82bf" exclusive="true">
    <sliver_type name="raw">
      <disk_image name="test"/>
    </sliver_type>
    <interface client_id="eaf392d3-2812-4b34-8932-0052419a82bf:if3">
      <ip address="10.0.0.3" netmask="255.255.255.0" type="ipv4"/>
    </interface>
    <services>
      <install url="https://github.com/EngineersBox/cassandra-benchmarking/releases/otel_collector-3.2.0/otel_collector.tar.gz" install_path="/var/lib"/>
      <install url="https://github.com/brianfrankcooper/YCSB/releases/download/0.17.0/ycsb-0.17.0.tar.gz" install_path="/var/lib"/>
      <execute shell="bash" command="echo &quot;# Node configuration properties&#10;APPLICATION_VARIANT=otel_collector&#10;APPLICATION_VERSION=3.2.0&#10;&#10;EBPF_NET_INTAKE_HOST=10.0.0.3&#10;EBPF_NET_INTAKE_PORT=8000&#10;&#10;OTEL_EXPORTER_OTLP_ENDPOINT=http://10.0.0.3:4318&#10;OTEL_SERVICE_NAME=eaf392d3-2812-4b34-8932-0052419a82bf&#10;OTEL_RESOURCE_ATTRIBUTES=application=otel_collector&#10;&#10;NODE_IP=10.0.0.3&#10;&#10;OTEL_METRICS_EXPORTER=otlp&#10;OTEL_TRACES_EXPORTER=always_on&#10;OTEL_LOGS_EXPORTER=otlp&quot; &gt; /var/lib/node_env"/>
      <execute shell="bash" command="sed -i &quot;s/@@COLLECTOR_ADDRESS@@/10.0.0.3/g&quot; /var/lib/config/otel/otel-instance.config.yaml"/>
      <execute shell="bash" command="echo &quot;&lt;TODO&gt;&quot; | docker login ghcr.io -u EngineersBox --password-stdin"/>
      <execute shell="bash" command="ln -s //var/lib/units/bootstrap.service /etc/systemd/system/bootstrap.service &amp;&amp; systemctl start bootstrap.service"/>
      <execute shell="bash" command="cat &lt;&lt;-EOF /var/lib/ycsb-0.17.0/base_profile.dat&#10;        &#10;            hosts=10.0.0.0,10.0.0.1,10.0.0.2&#10;            port=9042&#10;            &#10;        EOF&#10;        "/>
    </services>
  </node>
  <link client_id="LAN">
    <interface_ref client_id="17abbaf6-34ee-4b7f-b05c-802ae36e3599:if0"/>
    <interface_ref client_id="862896c8-0bfc-410f-8056-97fc7d9e2c73:if1"/>
    <interface_ref client_id="1b50d24d-780e-464d-bf3b-d9097d41a879:if2"/>
    <interface_ref client_id="eaf392d3-2812-4b34-8932-0052419a82bf:if3"/>
    <link_type name="lan"/>
    <sharedvlan:link_shared_vlan name="mesoscale-openflow"/>
  </link>
</rspec>
